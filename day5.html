<!DOCTYPE html>
<html lang="pl">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>üìú DZIE≈É 5 ‚Äì Echo ≈õmierci</title>
<meta name="description" content="Dzie≈Ñ 5 - Echo ≈õmierci. Pok√≥j 213 wys≈Ça≈Ç sygna≈Ç d≈∫wiƒôkowy. Tryb migajƒÖcy mo≈ºna wy≈ÇƒÖczyƒá." />
<style>
  :root{
    --bg:#0e0e0e;
    --panel-bg: rgba(6,6,6,0.88);
    --accent:#ff5555;
    --muted:#bdbdbd;
    --glass: rgba(255,255,255,0.02);
    --max-width: 900px;
  }

  /* Reset */
  *{box-sizing:border-box}
  html,body{height:100%}
  body{
    margin:0;
    font-family: "Courier New", monospace;
    background: linear-gradient(180deg,#0b0b0b 0%, #141414 60%), url('https://i.imgur.com/xhDqJvI.jpg') center/cover no-repeat fixed;
    color: #eee;
    -webkit-font-smoothing:antialiased;
    -moz-osx-font-smoothing:grayscale;
    display:flex;
    align-items:center;
    justify-content:center;
    padding:24px;
    transition: background-color .35s ease, color .35s ease;
  }

  /* Vignette to focus content */
  .vignette{
    position:fixed;
    inset:0;
    pointer-events:none;
    box-shadow: inset 0 60px 120px rgba(0,0,0,0.8), inset 0 -60px 120px rgba(0,0,0,0.8);
    z-index:0;
  }

  /* Page wrapper */
  .wrap{
    position:relative;
    z-index:5;
    width:100%;
    max-width:var(--max-width);
    display:flex;
    gap:20px;
    align-items:stretch;
    justify-content:center;
  }

  /* Panel with content */
  .panel{
    width:100%;
    background:var(--panel-bg);
    border-radius:12px;
    padding:28px;
    box-shadow: 0 10px 40px rgba(0,0,0,0.6), 0 0 24px rgba(255,85,85,0.06);
    border:1px solid rgba(255,255,255,0.03);
    color:var(--muted);
    overflow:hidden;
    display:flex;
    flex-direction:column;
    gap:12px;
    /* ensure header never gets cut */
    max-height: calc(100vh - 64px);
  }

  /* internal scroll for long content */
  .panel .content{
    overflow-y:auto;
    padding-right:8px;
    -webkit-overflow-scrolling:touch;
  }

  h1{
    margin:0 0 6px 0;
    font-size: clamp(1.6rem, 2.6vw, 2.4rem);
    color: #f6f6f6;
    text-shadow: 0 0 10px rgba(255,255,255,0.05);
  }

  .lead{
    color:#ddd;
    font-size:1rem;
    line-height:1.45;
    margin-bottom:4px;
  }

  p{ margin:0 0 12px 0; color: #dcdcdc; line-height:1.6; font-size:1rem; }

  strong{ color:var(--accent); }

  /* Subtle glitch (less aggressive) */
  .glitch {
    position:relative;
    display:inline-block;
  }
  .glitch::before, .glitch::after{
    content:attr(data-text);
    position:absolute;
    left:0; top:0;
    width:100%;
    overflow:hidden;
    clip-path: inset(0 0 0 0);
    opacity:0.85;
    pointer-events:none;
  }
  .glitch::before{
    transform:translate(2px, -1px);
    color: rgba(255,0,0,0.9);
    mix-blend-mode:screen;
    filter: blur(.6px);
    animation: g1 3s infinite linear;
  }
  .glitch::after{
    transform:translate(-2px, 1px);
    color: rgba(0,200,255,0.85);
    mix-blend-mode:screen;
    filter: blur(.6px);
    animation: g2 3.4s infinite linear;
  }

  @keyframes g1{
    0%{ clip-path: inset(0 0 0 0) }
    10%{ clip-path: inset(0 0 75% 0) }
    20%{ clip-path: inset(40% 0 0 0) }
    40%{ clip-path: inset(0 0 0 0) }
    100%{ clip-path: inset(0 0 0 0) }
  }
  @keyframes g2{
    0%{ clip-path: inset(0 0 0 0) }
    15%{ clip-path: inset(60% 0 0 0) }
    30%{ clip-path: inset(0 0 55% 0) }
    50%{ clip-path: inset(0 0 0 0) }
    100%{ clip-path: inset(0 0 0 0) }
  }

  /* Controls area (audio + toggle) */
  .controls{
    display:flex;
    gap:10px;
    align-items:center;
    justify-content:flex-end;
    margin-bottom:6px;
  }

  .btn{
    background:#111;
    border:1px solid rgba(255,85,85,0.12);
    color:var(--accent);
    padding:8px 12px;
    border-radius:8px;
    cursor:pointer;
    font-family:monospace;
    font-size:0.9rem;
  }
  .btn:focus{ outline:2px solid rgba(255,85,85,0.18) }

  .audio-controls{
    display:flex;
    gap:8px;
    align-items:center;
    font-size:0.9rem;
    color:#ddd;
  }
  .audio-controls input[type="range"]{ width:110px; }

  /* flash BG - apply to body but subtle */
  body.flash-bg{
    animation: flashBG 1s infinite;
  }
  @keyframes flashBG{
    0%,100%{ filter:none }
    50%{ filter:brightness(1.25) saturate(1.05) }
  }

  /* No-flash override */
  body.no-flash{ animation:none !important; filter:none !important; }
  body.no-flash .glitch::before, body.no-flash .glitch::after{ display:none }

  /* small screens */
  @media (max-width:720px){
    .wrap{ padding:0 6px }
    .panel{ padding:18px; max-height: calc(100vh - 48px) }
    .audio-controls input[type="range"]{ width:80px }
    .controls{ justify-content:space-between }
  }

  /* respect reduced motion */
  @media (prefers-reduced-motion: reduce){
    .glitch::before, .glitch::after, body.flash-bg, .panel{ animation:none !important }
    *{ transition:none !important }
  }
</style>
</head>
<body>
  <div class="vignette" aria-hidden="true"></div>

  <div class="wrap" role="main">
    <div class="panel" aria-label="Opis dnia 5">
      <div class="controls" aria-hidden="false">
        <div class="audio-controls" aria-label="Kontrola d≈∫wiƒôku">
          <button id="audioToggle" class="btn" title="Wstrzymaj / wznow audio">‚èØÔ∏è Pauza</button>
          <label style="display:flex;gap:8px;align-items:center;font-size:0.9rem;color:#ccc">
            G≈Ço≈õno≈õƒá
            <input id="volume" type="range" min="0" max="1" step="0.01" value="0.7" aria-label="Poziom g≈Ço≈õno≈õci"/>
          </label>
        </div>

        <div style="margin-left:auto;display:flex;gap:8px;align-items:center">
          <button id="toggleFlash" class="btn" aria-pressed="true" aria-label="Wy≈ÇƒÖcz migajƒÖce efekty">Tryb bez migania</button>
        </div>
      </div>

      <div class="content" tabindex="0">
        <h1><span class="glitch" data-text="üìú DZIE≈É 5 ‚Äì Echo ≈õmierci">üìú DZIE≈É 5 ‚Äì Echo ≈õmierci</span></h1>

        <p class="lead"><strong>Ostatni raport s≈Çu≈ºb technicznych:</strong></p>
        <p>‚ÄûPok√≥j 213 wys≈Ça≈Ç sygna≈Ç d≈∫wiƒôkowy na czƒôstotliwo≈õci <strong>2.13 MHz</strong>. Brak ≈∫r√≥d≈Ça emisji. Ka≈ºdy, kto go s≈Çucha≈Ç, mia≈Ç p√≥≈∫niej halucynacje.‚Äù</p>

        <p class="lead"><strong>Na pod≈Çodze:</strong></p>
        <p>‚ÄûS≈Çyszysz? To twoje echo...‚Äù<br/><strong>Kod:</strong> <code style="color:var(--accent)">ECH0-213</code></p>

        <hr style="border:none;border-top:1px solid rgba(255,255,255,0.04);margin:16px 0" />

        <p style="color:#cfcfcf;font-size:.95rem">Ten panel ma przewijanie je≈õli zawarto≈õƒá stanie siƒô d≈Çu≈ºsza ‚Äî nag≈Ç√≥wek nie zostanie obciƒôty. Mo≈ºesz wy≈ÇƒÖczyƒá efekty migajƒÖce przyciskiem powy≈ºej. Preferencje sƒÖ zapamiƒôtywane.</p>
      </div>
    </div>
  </div>

  <!-- Audio -->
  <audio id="distortedAudio" loop crossorigin="anonymous">
    <source src="https://cdn.pixabay.com/download/audio/2022/02/22/audio_3766ccf825.mp3?filename=distorted-voice-effect-1370.mp3" type="audio/mpeg">
    Twoja przeglƒÖdarka nie obs≈Çuguje audio.
  </audio>

<script>
  // Elementy
  const body = document.body;
  const toggleBtn = document.getElementById('toggleFlash');
  const audio = document.getElementById('distortedAudio');
  const audioToggle = document.getElementById('audioToggle');
  const volume = document.getElementById('volume');

  // Load preferences
  function loadMode(){
    const noFlash = localStorage.getItem('noFlashMode') === 'true';
    if(noFlash){
      body.classList.add('no-flash');
      body.classList.remove('flash-bg');
      toggleBtn.textContent = 'Tryb migajƒÖcy';
      toggleBtn.setAttribute('aria-pressed','false');
    } else {
      body.classList.remove('no-flash');
      body.classList.add('flash-bg');
      toggleBtn.textContent = 'Tryb bez migania';
      toggleBtn.setAttribute('aria-pressed','true');
    }
  }

  // Toggle handler
  toggleBtn.addEventListener('click', () => {
    if(body.classList.contains('no-flash')){
      localStorage.setItem('noFlashMode','false');
      body.classList.remove('no-flash');
      body.classList.add('flash-bg');
      toggleBtn.textContent = 'Tryb bez migania';
      toggleBtn.setAttribute('aria-pressed','true');
    } else {
      localStorage.setItem('noFlashMode','true');
      body.classList.add('no-flash');
      body.classList.remove('flash-bg');
      toggleBtn.textContent = 'Tryb migajƒÖcy';
      toggleBtn.setAttribute('aria-pressed','false');
    }
  });

  // Audio controls (respect autoplay policy: try to play, but users may need interaction)
  audio.volume = parseFloat(localStorage.getItem('audioVolume')) || 0.7;
  volume.value = audio.volume;

  // Try auto play (may be blocked)
  function tryPlay(){
    audio.play().then(()=> {
      audioToggle.textContent = '‚èØÔ∏è Pauza';
    }).catch(()=> {
      audioToggle.textContent = '‚èØÔ∏è Odtw√≥rz';
      // audio will play once user clicks
    });
  }
  tryPlay();

  audioToggle.addEventListener('click', () => {
    if(audio.paused){
      audio.play();
      audioToggle.textContent = '‚èØÔ∏è Pauza';
    } else {
      audio.pause();
      audioToggle.textContent = '‚èØÔ∏è Odtw√≥rz';
    }
  });

  volume.addEventListener('input', (e)=>{
    const v = parseFloat(e.target.value);
    audio.volume = v;
    localStorage.setItem('audioVolume', String(v));
  });

  // Respect reduced motion preference at runtime
  const mq = window.matchMedia('(prefers-reduced-motion: reduce)');
  function handleReducedMotion(){
    if(mq.matches){
      body.classList.add('no-flash');
      body.classList.remove('flash-bg');
    } else {
      // restore user preference
      loadMode();
    }
  }
  mq.addEventListener ? mq.addEventListener('change', handleReducedMotion) : mq.addListener(handleReducedMotion);

  // init
  handleReducedMotion();
  loadMode();

  // Accessibility: keyboard shortcut "M" toggles flash
  window.addEventListener('keydown', (e)=>{
    if(e.key.toLowerCase() === 'm' && (e.ctrlKey || e.metaKey) === false){
      e.preventDefault();
      toggleBtn.click();
    }
  });
</script>
</body>
</html>
